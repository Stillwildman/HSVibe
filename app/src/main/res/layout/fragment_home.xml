<?xml version="1.0" encoding="utf-8"?>
<layout>

    <data>
        <import type="android.view.View" />

        <variable
            name="homeViewModel"
            type="com.hsvibe.viewmodel.HomeViewModel" />

        <variable
            name="mainViewModel"
            type="com.hsvibe.viewmodel.MainViewModel" />
    </data>

    <androidx.constraintlayout.widget.ConstraintLayout
        xmlns:tools="http://schemas.android.com/tools"
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/background_home">

        <androidx.appcompat.widget.AppCompatImageView
            android:id="@+id/image_cornerCard"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:scaleType="fitEnd"
            app:layout_constraintTop_toTopOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:srcCompat="@drawable/background_corner_card"
            app:layout_constraintDimensionRatio="5:3"/>

        <androidx.core.widget.NestedScrollView
            android:id="@+id/layout_homeScrollView"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:scrollbars="vertical">

            <androidx.constraintlayout.widget.ConstraintLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <TextView
                    android:id="@+id/text_hiThere"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="@dimen/padding_size_xxl"
                    android:layout_marginTop="@dimen/actionbar_height_more_higher"
                    android:fontFamily="serif"
                    android:textSize="@dimen/font_text_size_m"
                    android:textStyle="bold"
                    android:text="@{@string/hi_there(mainViewModel.liveUserInfo.getName() ?? @string/guest)}"
                    android:clickable="true"
                    android:focusable="true"
                    android:background="?selectableItemBackground"
                    app:singleClick="@{() -> homeViewModel.onUserNameClick()}"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toTopOf="parent"
                    tools:text="Hi, Vincent" />

                <androidx.appcompat.widget.AppCompatImageView
                    android:id="@+id/image_diamond"
                    android:layout_width="@dimen/font_text_size_xxl"
                    android:layout_height="@dimen/font_text_size_xxl"
                    android:layout_marginStart="@dimen/padding_size_s"
                    android:visibility="@{mainViewModel.liveUserInfoVisibility ?? View.GONE}"
                    app:srcCompat="@drawable/ic_diamond"
                    app:layout_constraintStart_toEndOf="@+id/text_hiThere"
                    app:layout_constraintTop_toTopOf="@+id/text_hiThere"
                    app:layout_constraintBottom_toBottomOf="@+id/text_hiThere" />

                <TextView
                    android:id="@+id/point"
                    android:layout_width="@dimen/font_text_size_s"
                    android:layout_height="@dimen/font_text_size_s"
                    android:layout_marginTop="@dimen/padding_size_xxl"
                    android:gravity="center"
                    style="@style/Widget.AppCompat.Button"
                    android:text="P"
                    android:textSize="10sp"
                    android:background="@drawable/background_round_point"
                    android:visibility="@{mainViewModel.liveUserInfoVisibility ?? View.INVISIBLE}"
                    app:layout_constraintStart_toStartOf="@+id/text_hiThere"
                    app:layout_constraintTop_toBottomOf="@+id/text_hiThere" />

                <TextView
                    android:id="@+id/text_accumulationPoints"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="@dimen/padding_size_s"
                    android:text="@string/accumulation_points"
                    android:textSize="@dimen/font_text_size_xs"
                    android:visibility="@{mainViewModel.liveUserInfoVisibility ?? View.INVISIBLE}"
                    app:layout_constraintTop_toTopOf="@+id/point"
                    app:layout_constraintBottom_toBottomOf="@+id/point"
                    app:layout_constraintStart_toEndOf="@+id/point" />

                <TextView
                    android:id="@+id/text_pointNumber"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="@dimen/padding_size_m"
                    android:textSize="@dimen/font_text_size_m"
                    android:text="@{String.valueOf(mainViewModel.liveCurrentBalance.balance)}"
                    tools:text="0"
                    android:visibility="@{mainViewModel.liveUserInfoVisibility ?? View.INVISIBLE}"
                    app:layout_constraintStart_toStartOf="@+id/text_hiThere"
                    app:layout_constraintTop_toBottomOf="@+id/point"/>

                <TextView
                    android:id="@+id/text_point"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="@dimen/padding_size_m"
                    android:layout_marginBottom="@dimen/padding_size_s"
                    android:text="@string/point"
                    android:textSize="@dimen/font_text_size_xs"
                    android:visibility="@{mainViewModel.liveUserInfoVisibility ?? View.INVISIBLE}"
                    app:layout_constraintStart_toEndOf="@+id/text_pointNumber"
                    app:layout_constraintBottom_toBottomOf="@+id/text_pointNumber"/>

                <TextView
                    android:id="@+id/text_referNo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="@dimen/padding_size_m"
                    tools:text="@string/refer_no_is"
                    android:textSize="@dimen/font_text_size_xs"
                    android:text="@{@string/refer_no_is(mainViewModel.liveUserInfo.getReferNo)}"
                    android:visibility="@{mainViewModel.liveUserInfoVisibility ?? View.INVISIBLE}"
                    app:layout_constraintStart_toStartOf="@+id/text_hiThere"
                    app:layout_constraintTop_toBottomOf="@+id/text_pointNumber"/>

                <androidx.appcompat.widget.AppCompatImageView
                    android:id="@+id/image_userCard"
                    android:layout_width="@dimen/icon_marker_common_size"
                    android:layout_height="@dimen/icon_marker_common_size"
                    android:layout_marginEnd="@dimen/padding_size_xxl"
                    app:srcCompat="@drawable/ic_user_card"
                    app:layout_constraintTop_toTopOf="@+id/text_hiThere"
                    app:layout_constraintBottom_toBottomOf="@+id/text_hiThere"
                    app:layout_constraintEnd_toStartOf="@+id/image_bell"/>

                <androidx.appcompat.widget.AppCompatImageView
                    android:id="@+id/image_bell"
                    android:layout_width="@dimen/font_text_size_xxl"
                    android:layout_height="@dimen/font_text_size_xxl"
                    android:layout_marginEnd="@dimen/padding_size_xxl"
                    android:clickable="true"
                    android:focusable="true"
                    app:singleClick="@{() -> homeViewModel.onBellClick()}"
                    app:srcCompat="@drawable/selector_notification"
                    app:layout_constraintTop_toTopOf="@+id/text_hiThere"
                    app:layout_constraintBottom_toBottomOf="@+id/text_hiThere"
                    app:layout_constraintEnd_toEndOf="parent"/>

                <TextView
                    android:id="@+id/text_unreadDot"
                    android:layout_width="@dimen/font_text_size_m"
                    android:layout_height="@dimen/font_text_size_m"
                    android:gravity="center"
                    android:maxLength="2"
                    tools:text="9+"
                    tools:visibility="visible"
                    android:textSize="11sp"
                    android:text="@{homeViewModel.liveUnreadCount > 9 ? @string/more_than_nine : homeViewModel.liveUnreadCount.toString()}"
                    android:background="@drawable/background_unread_dot"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintTop_toTopOf="parent"
                    app:layout_constraintCircle="@id/image_bell"
                    app:layout_constraintCircleAngle="45"
                    app:layout_constraintCircleRadius="@dimen/font_text_size_s"
                    android:visibility="@{homeViewModel.liveUnreadCount == 0 ? View.GONE : View.VISIBLE}"/>

                <androidx.recyclerview.widget.RecyclerView
                    android:id="@+id/recycler_home"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="@dimen/actionbar_item_height"
                    android:layout_marginBottom="@dimen/padding_size_xl"
                    app:layout_constraintTop_toBottomOf="@+id/text_referNo"
                    app:layout_constraintBottom_toBottomOf="parent" />

            </androidx.constraintlayout.widget.ConstraintLayout>

        </androidx.core.widget.NestedScrollView>

        <ProgressBar
            android:id="@+id/loadingCircle"
            android:layout_width="@dimen/icon_common_size_l"
            android:layout_height="@dimen/icon_common_size_l"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintVertical_bias="0.3"
            android:visibility="gone" />

    </androidx.constraintlayout.widget.ConstraintLayout>

</layout>